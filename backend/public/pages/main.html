<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/styles/main.css">
    <link rel="icon" type="image/jpg" href="/img/favicon.png"/>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="../userCreate.js" defer></script>
    <script src="/scripts/menu.js" defer></script>
    <script src="../js/filtroProyectos.js" defer></script>
    <title>AUTIS - Gestión de proyectos</title>
</head>
<body>
<nav>
    <!-- Botón menú hamburguesa (oculto en escritorio, visible en móvil) -->
    <div id="menu-hamburguesa">
        <span></span>
        <span></span>
        <span></span>
    </div>
    <img id="logo" src="/img/logo_autis.png" alt="Logo Autis">
    <tab-button active="true" target="proyectos-group">Proyectos</tab-button>
    <tab-button target="tareas-group">Tareas</tab-button>
    <tab-button target="usuarios-group">Usuarios</tab-button>
    <tab-button target="dashboard-group">Dashboard</tab-button>
    <img id="cerrarSesion" src="/img/salir.png" alt="Icono cerrar sesión">
</nav>

<!-- Menú lateral oculto, se muestra al pulsar hamburguesa -->
<div id="menu-lateral">
    <span id="cerrarMenuLateral" class="cerrar-x">&times;</span>
    <tab-button active="true" target="proyectos-group">Proyectos</tab-button>
    <tab-button target="tareas-group">Tareas</tab-button>
    <tab-button target="usuarios-group">Usuarios</tab-button>
    <tab-button target="dashboard-group">Dashboard</tab-button>
</div>


<!-- Filtros para Proyectos -->
<div class="filtro-container" id="filtro-proyectos">
    <div class="filtro-menu">
        <label>
            Actividad:
            <select id="filtro-actividad-proyectos">
                <option value="">Todos</option>
                <option value="activo">Activo</option>
                <option value="inactivo">Inactivo</option>
            </select>
        </label>
        <label>
            Estado:
            <select id="filtro-estado-proyectos">
                <option value="">Todos</option>
                <option value="on-track">On-Track</option>
                <option value="at-risk">At-Risk</option>
                <option value="off-track">Off-Track</option>
                <option value="not-started">No Started</option>
                <option value="finished">Finished</option>
                <option value="discontinued">Discontinued</option>
            </select>
        </label>
        <button class="aplicar-filtro">Aplicar filtro</button>
    </div>
</div>

<!-- Filtros para Tareas -->
<div class="filtro-container" id="filtro-tareas" style="display: none;">
    <div class="filtro-menu">
        <label>
            Tipo:
            <select id="filtro-tipo-tareas">
                <option value="">Todas</option>
                <option value="task">Task</option>
                <option value="milestone">Milestone</option>
                <option value="summary-task">Summary Task</option>
                <option value="feature">Feature</option>
                <option value="epic">Epic</option>
                <option value="user-story">User Story</option>
                <option value="bug">Bug</option>
            </select>
        </label>
        <label>
            Estado:
            <select id="filtro-estado-tareas">
                <option value="">Todos</option>
                <option value="abierto">Abierto</option>
                <option value="cerrado">Cerrado</option>
            </select>
        </label>
        <label>
            T.Estado:
            <select id="filtro-tipo-estado-tareas">
                <option value="">Todos</option>
                <option value="new">New</option>
                <option value="in-specification">In Specification</option>
                <option value="specification" >Specification</option>
                <option value="confirmed">Confirmed</option>
                <option value="to-be-scheduled">To Be Scheduled</option>
                <option value="scheduled">Scheduled</option>
                <option value="in-progress">In Progress</option>
                <option value="developed">Developed</option>
                <option value="in-testing">In Testing</option>
                <option value="tested">Tested</option>
                <option value="test-failed">Test Failed</option>
                <option value="on-hold">On Hold</option>
            </select>
        </label>
        <label>
            Prioridad:
            <select id="filtro-Prioridad-tareas">
                <option value="">Todos</option>
                <option value="low">Low</option>
                <option value="normal">Normal</option>
                <option value="high">High</option>
                <option value="inmediate">Inmediate</option>
            </select>
        </label>
        <button class="aplicar-filtro">Aplicar filtro</button>
    </div>
</div>

<!-- Filtros para Usuarios -->
<div class="filtro-container" id="filtro-usuarios" style="display: none;">
    <div class="filtro-menu">
        <label>
            Rol:
            <select id="filtro-rol-usuarios">
                <option value="">Todos</option>
                <option value="admin">Administrador</option>
                <option value="jefe">Jefe de proyecto</option>
                <option value="desarrollador">Desarrollador</option>
                <option value="tester">Tester</option>
            </select>
        </label>
        <label>
            Departamento:
            <select id="filtro-departamento-usuarios">
                <option value="">Todos</option>
                <option value="desarrollo">Desarrollo</option>
                <option value="diseno">Diseño</option>
                <option value="qa">QA</option>
                <option value="marketing">Marketing</option>
            </select>
        </label>
        <label>
            Disponibilidad:
            <select id="filtro-disponibilidad-usuarios">
                <option value="">Todos</option>
                <option value="disponible">Disponible</option>
                <option value="ocupado">Ocupado</option>
            </select>
        </label>
        <button class="aplicar-filtro">Aplicar filtro</button>
    </div>
</div>

<div id="proyectos-group">
    <h1>Proyectos</h1>
    <div id="proyectos" class="section active"></div>
</div>

<div id="tareas-group" style="display: none;">
    <h1>Tareas</h1>
    <div id="tareas" class="section"></div>
</div>

<div id="usuarios-group">
    <h1>Usuarios</h1>
    <div id="users" class="section"></div>
    <div class="crear-container">
        <button class="boton_crear">Crear nuevo usuario</button>
    </div>
</div>

<div class="graficos-container">
    <div class="graficos">
        <h2>Gráfico de Barras</h2>
        <canvas id="graficoBarras" width="300" height="300"></canvas>
    </div>

    <div class="graficos">
        <h2>Gráfico Circular</h2>
        <canvas id="graficoCircular" width="300" height="300"></canvas>
    </div>

    <div class="graficos">
        <h2>Gráfico de Ejemplo</h2>
        <canvas id="graficoEjemplo" width="300" height="300"></canvas>
    </div>


</div>

<div id="modal-crear-usuario" class="modal-crear" style="display: none;">
    <div class="modal-content">
        <h2>Crear Nuevo Usuario</h2>
        <form id="form-crear-usuario">
            <div class="form-group">
                <label>Nombre</label>
                <input type="text" id="firstName-crear"
                    placeholder="Ej: Juan" required>
            </div>
            <div class="form-group">
                <label>Apellidos</label>
                <input type="text" id="lastName-crear"
                    placeholder="Ej: García Pérez" required>
            </div>
            <div class="form-group">
                <label>Usuario</label>
                <input type="text" id="login-crear"
                    placeholder="Ej: jgarcia" required>
            </div>
            <div class="form-group">
                <label>Correo electrónico</label>
                <input type="email" id="email-crear"
                    pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}$"
                    placeholder="usuario@dominio.com" required>
            </div>
            <div class="form-group password-container">
                <label>Contraseña</label>
                <input type="password" id="password-crear"
                    minlength="10"
                    placeholder="Mínimo 10 caracteres"
                    oninvalid="this.setCustomValidity('La contraseña debe tener al menos 10 caracteres')"
                    oninput="this.setCustomValidity('')"
                    required>
                <button type="button" id="toggle-password-crear" class="toggle-password">
                    <i class="fas fa-eye"></i>
                </button>
                <small class="hint">La contraseña debe tener al menos 10 caracteres</small>
            </div>
            <div class="modal-buttons">
                <button type="button" id="cancelar-crear" class="boton-cancelar">Cancelar</button>
                <button type="submit" class="boton-crear">Crear Usuario</button>
            </div>
        </form>
    </div>
</div>

<div id="dashboard-group" style="display: none;">
    <h1>Dashboard</h1>
    <time-entries-table></time-entries-table>
</div>

<script src="../components/TimeEntriesTable.js" type="module"></script>
<script src="../generate.js" type="module" defer></script>
<script src="/filters.js" type="module"></script>



</body>
</html>